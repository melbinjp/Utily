class AIToolsPortal{constructor(){this.tools=[],this.featuredTools=[],this.currentIndex=0,this.autoplayInterval=null,this.currentFilter="all",this.isLoading=!0,this.init()}async init(){this.showLoading(),this.setupThemeToggle(),this.setupKeyboardNavigation();try{await this.loadTools(),this.renderFeaturedTools(),this.renderToolGrid(),this.setupCarousel(),this.setupFilters(),this.setupIntersectionObserver()}catch(e){console.error("Failed to initialize portal:",e),this.showError("Failed to load AI tools. Please refresh the page.")}finally{this.hideLoading()}}async loadTools(){try{const e=await fetch("tools.json");if(!e.ok)throw new Error(`HTTP ${e.status}`);const t=await e.json();this.tools=t.filter(e=>e.show),this.featuredTools=this.tools.filter(e=>e.featured)}catch(e){throw console.error("Failed to load tools:",e),this.tools=[],this.featuredTools=[],e}}showLoading(){const e=document.getElementById("loading-indicator");e&&e.classList.remove("hidden")}hideLoading(){const e=document.getElementById("loading-indicator");e&&setTimeout(()=>{e.classList.add("hidden")},500)}showError(e){const t=document.createElement("div");t.className="error-message",t.innerHTML=`\n            <div class="error-content">\n                <i class="fas fa-exclamation-triangle"></i>\n                <p>${e}</p>\n                <button onclick="location.reload()">Retry</button>\n            </div>\n        `,document.body.appendChild(t)}setupThemeToggle(){const e=document.querySelector(".theme-toggle"),t=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",t),this.updateThemeIcon(t),e?.addEventListener("click",()=>{const e="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),this.updateThemeIcon(e)})}updateThemeIcon(e){const t=document.querySelector(".theme-toggle i");t&&(t.className="dark"===e?"fas fa-sun":"fas fa-moon")}setupKeyboardNavigation(){document.addEventListener("keydown",e=>{if(!e.target.matches("input, textarea, select"))switch(e.key){case"ArrowLeft":e.preventDefault(),this.previousSlide();break;case"ArrowRight":e.preventDefault(),this.nextSlide();break;case"Escape":this.pauseAutoplay()}})}renderFeaturedTools(){const e=document.querySelector(".carousel-inner"),t=document.querySelector(".carousel-indicators");if(!e||!t)return;const n=e.querySelector(".carousel-placeholder");n&&n.remove(),e.innerHTML="",t.innerHTML="";document.querySelectorAll(".carousel-control").forEach(e=>e.style.opacity="1"),this.featuredTools.forEach((n,r)=>{const o=this.createCarouselItem(n,r);e.appendChild(o);const a=this.createIndicator(r);t.appendChild(a)})}createCarouselItem(e,t){const n=document.createElement("div");return n.className="carousel-item",n.setAttribute("role","tabpanel"),n.setAttribute("aria-label",`Featured tool ${t+1}: ${e.title}`),e.background_image&&(n.style.backgroundImage=`linear-gradient(135deg, rgba(102, 126, 234, 0.8) 0%, rgba(118, 75, 162, 0.9) 100%), url(${e.background_image})`,n.style.backgroundSize="cover",n.style.backgroundPosition="center"),n.innerHTML=`\n            <div class="featured-content">\n                <div class="featured-text">\n                    <h2><i class="fas fa-rocket" aria-hidden="true"></i> Featured Tool</h2>\n                    <h3>${this.escapeHtml(e.title)}</h3>\n                    <p>${this.escapeHtml(e.featured_description||e.description)}</p>\n                    <div class="featured-actions">\n                        <a href="${e.url}" class="primary-btn" target="_blank" rel="noopener noreferrer" aria-label="Try ${e.title}">\n                            <span>Try it now</span>\n                            <i class="fas fa-arrow-right" aria-hidden="true"></i>\n                        </a>\n                        <a href="#main-content" class="secondary-btn">Explore all tools</a>\n                    </div>\n                </div>\n                <div class="featured-visual">\n                    <div class="floating-card">\n                        <div class="card-icon">\n                            <i class="${e.icon}" aria-hidden="true"></i>\n                        </div>\n                        <div class="card-content">\n                            <h4>${this.escapeHtml(e.title)}</h4>\n                            <p>AI-Powered Tool</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,n}createIndicator(e){const t=document.createElement("button");return t.className="indicator",t.setAttribute("role","tab"),t.setAttribute("aria-label",`Go to slide ${e+1}`),t.dataset.index=e,t.addEventListener("click",()=>{this.goToSlide(e)}),t}renderToolGrid(){const e=document.getElementById("tool-grid");if(!e)return;const t=e.querySelector(".tool-placeholder");t&&t.remove(),e.innerHTML="",this.tools.forEach(t=>{const n=this.createToolCard(t);e.appendChild(n)})}createToolCard(e){const t=document.createElement("article");t.className="tool-card",t.dataset.category=this.getToolCategory(e),t.style.minHeight="200px";const n=document.createElement("template");return n.innerHTML=`\n            <div class="tool-card-header">\n                <div class="tool-card-icon">\n                    <i class="${e.icon}" aria-hidden="true"></i>\n                </div>\n                <h3>\n                    <a href="${e.url}" target="_blank" rel="noopener noreferrer" aria-label="Open ${e.title}">\n                        ${this.escapeHtml(e.title)}\n                    </a>\n                </h3>\n            </div>\n            <p>${this.escapeHtml(e.description)}</p>\n            <div class="tool-card-footer">\n                <a href="${e.url}" class="tool-card-link" target="_blank" rel="noopener noreferrer">\n                    Try it out\n                    <i class="fas fa-external-link-alt" aria-hidden="true"></i>\n                </a>\n            </div>\n        `,t.appendChild(n.content.cloneNode(!0)),t.addEventListener("click",t=>{t.target.closest("a")||window.open(e.url,"_blank","noopener,noreferrer")}),t}getToolCategory(e){const t=e.title.toLowerCase(),n=e.description.toLowerCase();return t.includes("chat")||t.includes("ai")||n.includes("ai")||n.includes("transcription")?"ai":t.includes("audio")||t.includes("video")||t.includes("3d")||t.includes("voice")?"media":"utility"}setupCarousel(){if(0===this.featuredTools.length)return;const e=document.querySelector(".carousel-control.prev"),t=document.querySelector(".carousel-control.next");e?.addEventListener("click",()=>this.previousSlide()),t?.addEventListener("click",()=>this.nextSlide()),this.setupTouchNavigation();const n=document.querySelector(".carousel");n?.addEventListener("mouseenter",()=>this.pauseAutoplay()),n?.addEventListener("mouseleave",()=>this.resumeAutoplay()),document.addEventListener("visibilitychange",()=>{document.hidden?this.pauseAutoplay():this.resumeAutoplay()}),this.updateCarousel(),this.startAutoplay()}setupTouchNavigation(){const e=document.querySelector(".carousel");if(!e)return;let t=0,n=0,r=!1;e.addEventListener("touchstart",e=>{t=e.touches[0].clientX,n=e.touches[0].clientY,r=!0},{passive:!0}),e.addEventListener("touchmove",e=>{if(!r)return;const o=e.touches[0].clientX-t,a=e.touches[0].clientY-n;Math.abs(o)>Math.abs(a)&&e.preventDefault()},{passive:!1}),e.addEventListener("touchend",e=>{if(!r)return;const n=e.changedTouches[0].clientX-t;Math.abs(n)>50&&(n>0?this.previousSlide():this.nextSlide()),r=!1},{passive:!0})}setupFilters(){document.querySelectorAll(".filter-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.filter;this.setActiveFilter(t),this.filterTools(t)})})}setActiveFilter(e){document.querySelectorAll(".filter-btn").forEach(e=>{e.classList.remove("active")}),document.querySelector(`[data-filter="${e}"]`)?.classList.add("active"),this.currentFilter=e}filterTools(e){document.querySelectorAll(".tool-card").forEach(t=>{const n=t.dataset.category;"all"===e||n===e?(t.classList.remove("hidden"),t.style.animation="fadeInUp 0.3s ease forwards"):t.classList.add("hidden")})}setupIntersectionObserver(){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.style.animation="fadeInUp 0.6s ease forwards",e.unobserve(t.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".tool-card").forEach(t=>{e.observe(t)})}updateCarousel(){const e=document.querySelectorAll(".carousel-item"),t=document.querySelectorAll(".indicator");e.forEach((e,t)=>{e.classList.toggle("active",t===this.currentIndex),e.setAttribute("aria-hidden",t!==this.currentIndex)}),t.forEach((e,t)=>{e.classList.toggle("active",t===this.currentIndex),e.setAttribute("aria-selected",t===this.currentIndex)});const n=document.querySelector(".carousel-inner");n&&(n.style.transform=`translateX(-${100*this.currentIndex}%)`)}nextSlide(){this.currentIndex=(this.currentIndex+1)%this.featuredTools.length,this.updateCarousel(),this.resetAutoplay()}previousSlide(){this.currentIndex=(this.currentIndex-1+this.featuredTools.length)%this.featuredTools.length,this.updateCarousel(),this.resetAutoplay()}goToSlide(e){this.currentIndex=e,this.updateCarousel(),this.resetAutoplay()}startAutoplay(){this.featuredTools.length<=1||(this.autoplayInterval=setInterval(()=>{this.nextSlide()},6e3))}pauseAutoplay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}resumeAutoplay(){!this.autoplayInterval&&this.featuredTools.length>1&&this.startAutoplay()}resetAutoplay(){this.pauseAutoplay(),this.resumeAutoplay()}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}}document.addEventListener("DOMContentLoaded",()=>{new AIToolsPortal});const style=document.createElement("style");style.textContent="\n    @keyframes fadeInUp {\n        from {\n            opacity: 0;\n            transform: translateY(30px);\n        }\n        to {\n            opacity: 1;\n            transform: translateY(0);\n        }\n    }\n    \n    .error-message {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.8);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 2000;\n        color: white;\n        text-align: center;\n    }\n    \n    .error-content {\n        background: #dc3545;\n        padding: 2rem;\n        border-radius: 1rem;\n        max-width: 400px;\n    }\n    \n    .error-content i {\n        font-size: 3rem;\n        margin-bottom: 1rem;\n    }\n    \n    .error-content button {\n        background: white;\n        color: #dc3545;\n        border: none;\n        padding: 0.5rem 1rem;\n        border-radius: 0.5rem;\n        cursor: pointer;\n        margin-top: 1rem;\n        font-weight: 600;\n    }\n",document.head.appendChild(style);